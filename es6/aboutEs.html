<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>EcmaScript | ALin的个人博客</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - 共 $1 行","copy":"复制","copyFinish":"复制成功","expand":"展开"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="ALin的个人博客" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>EcmaScript</h1></div><hr><div id="post-content"><h2 id="ES"><a href="#ES" class="headerlink" title="ES"></a>ES</h2><p>全称是EcmaScript,是脚本语言的规范，而平时写的JavaScript是EcmaScript的一种实现，所以ES新特性其实指的就是JavaScript的新特性</p>
<h2 id="为什么要学习新特性？"><a href="#为什么要学习新特性？" class="headerlink" title="为什么要学习新特性？"></a>为什么要学习新特性？</h2><p>· 语言简洁，功能丰富<br>· 框架开发应用</p>
<h2 id="es6——let变量声明即特性"><a href="#es6——let变量声明即特性" class="headerlink" title="es6——let变量声明即特性"></a>es6——let变量声明即特性</h2><ol>
<li>变量不能重复声明</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> star = <span class="hljs-string">&#x27;hhh&#x27;</span><br><span class="hljs-keyword">let</span> star = <span class="hljs-string">&#x27;bbb&#x27;</span><br><span class="hljs-comment">// 不可以哦</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>块级作用域</li>
</ol>
<ul>
<li>包括if,else,while,for…</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-keyword">let</span> flower = <span class="hljs-string">&#x27;星辰花&#x27;</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(flower) <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>不存在变量提升</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(master);<br><span class="hljs-keyword">let</span> master = <span class="hljs-string">&#x27;相声演员&#x27;</span> <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>不影响作用域链</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-keyword">let</span> school = <span class="hljs-string">&#x27;霍格沃滋&#x27;</span>;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(school)<br>    &#125;<br>    <span class="hljs-title function_">fn</span>() <span class="hljs-comment">// 不影响可以输出霍格沃滋</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="常量const"><a href="#常量const" class="headerlink" title="常量const"></a>常量const</h2><ol>
<li>一定要赋值初始值</li>
<li>(潜规则)一般常量使用大写</li>
<li>常量的值不能修改</li>
<li>块级作用域</li>
<li>对于数组元素和对象的属性修改，不算做对常量的修改，不会报错</li>
</ol>
<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><p>es6允许按照一定模式从数组和对象中提取值，对变量进行赋值</p>
<h3 id="数组的解构"><a href="#数组的解构" class="headerlink" title="数组的解构"></a>数组的解构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">F4</span> = [<span class="hljs-string">&#x27;aaa&#x27;</span>,<span class="hljs-string">&#x27;bbb&#x27;</span>,<span class="hljs-string">&#x27;ccc&#x27;</span>,<span class="hljs-string">&#x27;ddd&#x27;</span>];<br><span class="hljs-keyword">let</span> [a,b,c,d] = <span class="hljs-variable constant_">F4</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// aaa</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b); <span class="hljs-comment">// bbb</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c); <span class="hljs-comment">// ccc</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d); <span class="hljs-comment">// ddd</span><br></code></pre></td></tr></table></figure>

<h3 id="对象的解构"><a href="#对象的解构" class="headerlink" title="对象的解构"></a>对象的解构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> music = &#123;<br>    <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;pop&#x27;</span>,<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;兰亭序&#x27;</span>,<br>    <span class="hljs-attr">singer</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;周杰伦&#x27;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> &#123;type,name,singer&#125; = music <span class="hljs-comment">// 变量名必须一致</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(type); <span class="hljs-comment">// pop</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// 兰亭序</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(singer); <span class="hljs-comment">// f()&#123;console.log(&#x27;周杰伦&#x27;)&#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="es6模板字符串"><a href="#es6模板字符串" class="headerlink" title="es6模板字符串"></a>es6模板字符串</h2><ul>
<li>模板语法 ``</li>
<li>特性</li>
</ul>
<ol>
<li>可以直接出现换行符</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">`&lt;ul&gt;</span><br><span class="hljs-string">            &lt;li&gt;沈腾&lt;/li&gt;</span><br><span class="hljs-string">            &lt;li&gt;马丽&lt;/li&gt;</span><br><span class="hljs-string">          &lt;/ul&gt;`</span><br><span class="hljs-comment">// 如果是&#x27;&#x27;得用引号与➕连接，字符串拼接，反引号可以直接做到</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>变量拼接 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> movie = <span class="hljs-string">&#x27;Dead Poet Society&#x27;</span>;<br><span class="hljs-keyword">let</span> out = <span class="hljs-string">`<span class="hljs-subst">$&#123;movie&#125;</span>是我最喜欢的电影！！！`</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(out)<br></code></pre></td></tr></table></figure>

<h2 id="对象的简化写法"><a href="#对象的简化写法" class="headerlink" title="对象的简化写法"></a>对象的简化写法</h2><p>es6允许在大括号里，直接写入变量和函数，作为对象属性和方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> singer = <span class="hljs-string">&#x27;林俊杰&#x27;</span><br><span class="hljs-keyword">let</span> name = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;江南&#x27;</span>)<br>&#125;<br><span class="hljs-keyword">const</span> songs = &#123;<br>    singer,<br>    name,<br>    <span class="hljs-comment">// otherSongs:function() &#123;&#125;</span><br>    <span class="hljs-title function_">otherSongs</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">// 可以省略function，且可以直接在这里定义函数</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;不死之身&#x27;</span>)<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(songs)<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="箭头函数声明特性"><a href="#箭头函数声明特性" class="headerlink" title="箭头函数声明特性"></a>箭头函数声明特性</h2><ol>
<li>this是静态的，始终指向函数声明时所在作用域下的this的值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)<br>&#125;<br><span class="hljs-keyword">let</span> <span class="hljs-title function_">getName2</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)<br>&#125;<br><span class="hljs-comment">// 设置window对象的name属性</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;美人鱼&#x27;</span>;<br><span class="hljs-keyword">const</span> songs = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;新地球&#x27;</span><br>&#125;<br><span class="hljs-title function_">getName</span>() <span class="hljs-comment">// 美人鱼</span><br><span class="hljs-title function_">getName2</span>() <span class="hljs-comment">// 美人鱼</span><br><br><span class="hljs-comment">// call方法调用</span><br>getName.<span class="hljs-title function_">call</span>(songs) <span class="hljs-comment">// 新地球</span><br>getName2.<span class="hljs-title function_">call</span>(songs) <span class="hljs-comment">// 美人鱼</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>不能作为构造函数实例化对象</li>
<li>不能使用arguments变量</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>)<br>&#125;<br><span class="hljs-title function_">fn</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>不能使用yield命令，不能生成构造器函数</li>
</ol>
<ul>
<li>箭头函数的简写<br>1） 省略小括号，当形参只有一个的时候<br>let add = (n) =&gt; {<br>  return n + n<br>}<br>console.log(9)</li>
</ul>
<ol start="2">
<li>省略花括号，当代码体只有一条语句的时候，此时return必须省略，而且语句的执行结果就是函数的返回值<br>let pow =&gt; n*n<br>console.log(pow(9))<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3></li>
</ol>
<ul>
<li>适合与this无关的问题，定时器，数组方法回调</li>
<li>不适合与this有关的，事件回调，对象的方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 从数组中返回偶数的元素</span><br><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">100</span>];<br><span class="hljs-keyword">const</span> result = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item%<span class="hljs-number">2</span> === <span class="hljs-number">0</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br></code></pre></td></tr></table></figure>

<h2 id="es6函数参数默认值"><a href="#es6函数参数默认值" class="headerlink" title="es6函数参数默认值"></a>es6函数参数默认值</h2><ol>
<li>形参初始值 具有默认值的参数，一般位置要靠后(潜规则)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> (<span class="hljs-params">a,b,,c=<span class="hljs-number">10</span></span>) &#123;<br>    <span class="hljs-keyword">return</span> a+b+c<br>&#125;<br><span class="hljs-keyword">let</span> result = <span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// 13</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>与解构赋值结合</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// function connect(options) &#123;</span><br><span class="hljs-comment">//     let host = options.name</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// 上面代码未解构赋值，每次都要写options</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">&#123;host=<span class="hljs-string">&quot;127.0.0.1&quot;</span>,username,password,port&#125;</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(host)<br>&#125;<br><span class="hljs-title function_">connect</span>(&#123;<br>    <span class="hljs-attr">host</span>:<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-comment">// 如果这里没有传参，那就是默认值127.0.0.1，这里有值就是localhost </span><br>    <span class="hljs-attr">username</span>:<span class="hljs-string">&#x27;root&#x27;</span>,<br>    <span class="hljs-attr">password</span>:<span class="hljs-string">&#x27;root&#x27;</span>,<br>    <span class="hljs-attr">port</span>:<span class="hljs-number">3000</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a>rest参数</h2><p>用于获取函数的实参，用来代替arguments</p>
<ul>
<li><p>ES5获取实参</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">date</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>)<br>&#125;<br><span class="hljs-title function_">date</span>(<span class="hljs-string">&#x27;碧根果&#x27;</span>,<span class="hljs-string">&#x27;夏威夷果&#x27;</span>,<span class="hljs-string">&#x27;核桃&#x27;</span>)<br></code></pre></td></tr></table></figure></li>
<li><p>ES6获取实参</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">date</span>(<span class="hljs-params">...args</span>) &#123; <span class="hljs-comment">// 这里固定格式...</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args) <span class="hljs-comment">// 打印出来是个数组，可以用数组里的方法filter、map、every、some</span><br>&#125;<br><span class="hljs-title function_">date</span>(<span class="hljs-string">&#x27;碧根果&#x27;</span>,<span class="hljs-string">&#x27;夏威夷果&#x27;</span>,<span class="hljs-string">&#x27;核桃&#x27;</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li>rest参数必须放到最后</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a,b,...args</span>) &#123;<span class="hljs-comment">// ...args这个放前面报错</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// 1</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b); <span class="hljs-comment">// 2</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args); <span class="hljs-comment">// [3,4,5]</span><br>&#125;<br><span class="hljs-title function_">fn</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>… 将数组转换为逗号分隔的参数序列</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> movies = [<span class="hljs-string">&#x27;死亡诗社&#x27;</span>,<span class="hljs-string">&#x27;猫的报恩&#x27;</span>,<span class="hljs-string">&#x27;女大法官金斯伯格&#x27;</span>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">watcher</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>)<br>&#125;<br><span class="hljs-title function_">watcher</span>(...movies) <span class="hljs-comment">// 等同于watcher(&#x27;死亡诗社&#x27;,&#x27;猫的报恩&#x27;,&#x27;女大法官金斯伯格&#x27;)</span><br></code></pre></td></tr></table></figure>

<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.数组的合并</span><br><span class="hljs-keyword">const</span> name = [<span class="hljs-string">&#x27;林俊杰&#x27;</span>,<span class="hljs-string">&#x27;周杰伦&#x27;</span>,<span class="hljs-string">&#x27;许嵩&#x27;</span>,<span class="hljs-string">&#x27;陈奕迅&#x27;</span>]<br><span class="hljs-keyword">const</span> songs = [<span class="hljs-string">&#x27;杀手&#x27;</span>,<span class="hljs-string">&#x27;七里香&#x27;</span>,<span class="hljs-string">&#x27;玫瑰花的葬礼&#x27;</span>,<span class="hljs-string">&#x27;浮夸&#x27;</span>]<br><span class="hljs-keyword">const</span> combine = name.<span class="hljs-title function_">concat</span>(songs) <br><span class="hljs-keyword">const</span> combine2 = [...name,...songs]<br><br><span class="hljs-comment">// 2. 数组的克隆</span><br><span class="hljs-keyword">const</span> exo = [<span class="hljs-string">&#x27;mama&#x27;</span>,<span class="hljs-string">&#x27;if you&#x27;</span>,<span class="hljs-string">&#x27;pawl&#x27;</span>]<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">EXO</span> = [...exo]<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable constant_">EXO</span>) <span class="hljs-comment">// [&#x27;mama&#x27;,&#x27;if you&#x27;,&#x27;pawl&#x27;]</span><br><br><span class="hljs-comment">// 3. 将伪数组转成真正的数组</span><br><span class="hljs-keyword">const</span> divs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&#x27;div&#x27;</span>)<br><span class="hljs-keyword">const</span> divArr = [...divs]<br></code></pre></td></tr></table></figure>

<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>类似字符串的数据类型<br>symbol值唯一用来解决命名冲突<br>不能与其他数据进行运算<br>symbol定义的属性不能使用for…in循环遍历，但可以使用Reflect.ownKeys来获取对象的所有键名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Symbol创建，通过函数调用，返回symbol的值</span><br><span class="hljs-keyword">let</span> s = <span class="hljs-title class_">Symbol</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s,<span class="hljs-keyword">typeof</span> s) <span class="hljs-comment">// Symbol() &quot;symbol&quot;</span><br><br><span class="hljs-keyword">let</span> s1 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;hhh&#x27;</span>)<br><span class="hljs-keyword">let</span> s2 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;hhh&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s1 === s2) <span class="hljs-comment">// false 因为堆内存地址值不同</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Symbol.for()并不是每次都会创建一个新的symbol，它会首先检查给定的key是否已经在注册表中了。假如是，则会直接返回上次存储的，否则会再新建一个</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// Symbol.for()创建，此时symbol是一个对象，函数对象</span><br><span class="hljs-keyword">let</span> s4 = <span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&#x27;xxx&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s,<span class="hljs-keyword">typeof</span> s) <span class="hljs-comment">// Symbol(xxx) &quot;symbol&quot;</span><br><br><span class="hljs-keyword">let</span> s5 = <span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&#x27;xxx&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s4 === s5) <span class="hljs-comment">// true</span><br><br><span class="hljs-comment">// 不能与其他数据进行运算</span><br><span class="hljs-keyword">let</span> result = s+<span class="hljs-number">100</span> <span class="hljs-comment">// 报错</span><br><span class="hljs-keyword">let</span> result = s&gt;<span class="hljs-number">100</span> <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure>

<h3 id="symbol的应用场景"><a href="#symbol的应用场景" class="headerlink" title="symbol的应用场景"></a>symbol的应用场景</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 向对象中添加方法 up down</span><br><span class="hljs-keyword">let</span> game = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;俄罗斯方块&quot;</span><br>&#125;<br><span class="hljs-keyword">let</span> methods = &#123;<br>    <span class="hljs-attr">up</span>:<span class="hljs-title class_">Symbol</span>()<br>    <span class="hljs-attr">down</span>:<span class="hljs-title class_">Symbol</span>()<br>&#125;<br>game[methods.<span class="hljs-property">up</span>] = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;我可以快速上升&quot;</span>)<br>&#125;<br>game[methods.<span class="hljs-property">down</span>] = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;我可以快速下降&quot;</span>)<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(game )<br><span class="hljs-comment">// 或者这样</span><br><span class="hljs-keyword">let</span> game = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;俄罗斯方块&quot;</span>,<br>    [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;up&#x27;</span>)]:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;我可以快速上升&quot;</span>)<br>    &#125;,<br>    [<span class="hljs-title class_">Symbol</span>[<span class="hljs-string">&#x27;down&#x27;</span>]]:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;我可以快速下降&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="symbol的内置对象"><a href="#symbol的内置对象" class="headerlink" title="symbol的内置对象"></a>symbol的内置对象</h3><p>改变对象在特定场景下的表现</p>
<ul>
<li>hasInstance</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">static</span> [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">hasInstance</span>]() &#123; <span class="hljs-comment">//static表示该方法不会被实例继承</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我被用来检测类型了&#x27;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> o = &#123;&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Person</span>) <span class="hljs-comment">// false</span><br><span class="hljs-comment">// 但是如果</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">static</span> [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">hasInstance</span>]() &#123; <span class="hljs-comment">//static表示该方法不会被实例继承</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我被用来检测类型了&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><span class="hljs-comment">// 如果这里是false，那下面console就是false</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> o = &#123;&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Person</span>) <span class="hljs-comment">// true </span><br></code></pre></td></tr></table></figure>

<ul>
<li>isConcatSpreadable</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br><span class="hljs-keyword">const</span> arr2 = [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br>arr2[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">isConcatSpreadable</span>] = <span class="hljs-literal">false</span> <span class="hljs-comment">// 控制是否展开</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2.<span class="hljs-title function_">concat</span>(arr1)) <span class="hljs-comment">// [1,2,3,Array(3)]</span><br></code></pre></td></tr></table></figure>

<h2 id="迭代器iterator"><a href="#迭代器iterator" class="headerlink" title="迭代器iterator"></a>迭代器iterator</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 声明一个数组</span><br><span class="hljs-keyword">const</span> xiyou = [<span class="hljs-string">&#x27;孙悟空&#x27;</span>,<span class="hljs-string">&#x27;沙悟净&#x27;</span>,<span class="hljs-string">&#x27;猪八戒&#x27;</span>,<span class="hljs-string">&#x27;唐僧&#x27;</span>]<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> v <span class="hljs-keyword">in</span> xiyou) &#123; <span class="hljs-comment">// for...in 保存键名</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v) <span class="hljs-comment">// 0,1,2,3</span><br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> xiyou) &#123; <span class="hljs-comment">//for...of保存键值，每一次返回结果是数组里面的成员</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v) <span class="hljs-comment">// 孙悟空 沙悟净 猪八戒 唐僧</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>工作原理</li>
</ul>
<ol>
<li>创建一个指针对象，指向当前数据结构起始位置</li>
<li>第一次调用对象的next()方法，指针自动指向数据结构的第一个成员</li>
<li>接下来不断调用next方法，指针一直往后移动，直到指向最后一个成员</li>
<li>每调用next方法返回一个包含</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> iterator = xiyou[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator) <span class="hljs-comment">// Array iterator &#123;&#125; 展开后里面有一个next方法</span><br><span class="hljs-comment">// 调用对象的next方法</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>()) <span class="hljs-comment">// &#123;value:&#x27;孙悟空&#x27;,done:false&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>如果遍历一个对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-keyword">class</span> = &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;幼儿园大班&quot;</span>,<br>    stu : [<br>        <span class="hljs-string">&#x27;xiaoming&#x27;</span>,<br>        <span class="hljs-string">&#x27;xiaohong&#x27;</span>,<br>        <span class="hljs-string">&#x27;xiaolan&#x27;</span><br>    ]<br>&#125;<br><span class="hljs-comment">// 遍历这个对象</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> <span class="hljs-keyword">class</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v) <span class="hljs-comment">// 报错显示 class is not iterable</span><br>&#125;<br><span class="hljs-comment">// 所以可以手动</span><br>[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() &#123;<br>    <span class="hljs-comment">// 索引变量</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> _this = <span class="hljs-variable language_">this</span><br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">next</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">if</span>(index &lt; _this.<span class="hljs-property">stus</span>.<span class="hljs-property">length</span>) &#123;<br>                <span class="hljs-keyword">const</span> result = &#123;<span class="hljs-attr">value</span>:_this.<span class="hljs-property">stus</span>[index],<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span>&#125;;<br>                <span class="hljs-comment">// 下标自增</span><br>                index++<br>                <span class="hljs-keyword">return</span> result<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">value</span>:<span class="hljs-literal">undefined</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>&#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="生成器函数"><a href="#生成器函数" class="headerlink" title="生成器函数"></a>生成器函数</h2><p>简写：function *<br>什么是生成器函数？</p>
<ul>
<li><p>这个函数返回一个可枚举的对象（官方说法返回Generator对象）</p>
</li>
<li><p>Generator 函数是 ES6 提供的一种异步编程解决方案。</p>
</li>
<li><p>Generator函数像一个状态机，保存了许多状态，并将这些状态作为遍历器对象返回。</p>
</li>
<li><p>可以通过.next()枚举其中的数据。内部通过yield关键字实现步进。<br>语法：function* name([param[, param[, … param]]]) { statements }</p>
</li>
<li><p>name 函数名</p>
</li>
<li><p>param 要传递给函数的一个参数的名称，一个函数最多可以有 255 个参数。</p>
</li>
<li><p>statements 普通 JS 语句。<br>生成器函数在执行时能暂停，后面又能从暂停处继续执行</p>
</li>
<li><p>调用一个生成器函数并不会马上执行它里面的语句，而是返回一个这个生成器的 迭代器 （ iterator ）对象。当这个迭代器的 next() 方法被首次（后续）调用时，其内的语句会执行到第一个（后续）出现yield的位置为止，yield 后紧跟迭代器要返回的值。或者如果用的是 yield*（多了个星号），则表示将执行权移交给另一个生成器函数（当前生成器暂停执行）。</p>
</li>
<li><p>next()方法返回一个对象，这个对象包含两个属性：value 和 done，value 属性表示本次 yield 表达式的返回值，done 属性为布尔类型，表示生成器后续是否还有 yield 语句，即生成器函数是否已经执行完毕并返回</p>
</li>
<li><p>调用 next()方法时，如果传入了参数，那么这个参数会传给上一条执行的 yield 语句左边的变量，例如下面例子中的x</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">10</span>;<br>    x=<span class="hljs-keyword">yield</span> <span class="hljs-string">&#x27;foo&#x27;</span>;<br>    <span class="hljs-keyword">yield</span> x;<br>&#125;<br><br><span class="hljs-keyword">var</span> gen_obj=<span class="hljs-title function_">gen</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen_obj.<span class="hljs-title function_">next</span>());<span class="hljs-comment">// 执行 yield 10，返回 10</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen_obj.<span class="hljs-title function_">next</span>());<span class="hljs-comment">// 执行 yield &#x27;foo&#x27;，返回 &#x27;foo&#x27;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen_obj.<span class="hljs-title function_">next</span>(<span class="hljs-number">100</span>));<span class="hljs-comment">// 将 100 赋给上一条 yield &#x27;foo&#x27; 的左值，即执行 x=100，返回 100</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen_obj.<span class="hljs-title function_">next</span>());<span class="hljs-comment">// 执行完毕，value 为 undefined，done 为 true</span><br></code></pre></td></tr></table></figure>

<p>当在生成器函数中显式 return 时，会导致生成器立即变为完成状态，即调用 next() 方法返回的对象的 done 为 true。如果 return 后面跟了一个值，那么这个值会作为当前调用 next() 方法返回的 value 值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* 普通示例 */</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">idMaker</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">while</span>(index&lt;<span class="hljs-number">3</span>)<br>    <span class="hljs-keyword">yield</span> index++;<br>&#125;<br><br><span class="hljs-keyword">var</span> gen = <span class="hljs-title function_">idMaker</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 2</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// undefined</span><br><br><span class="hljs-comment">/* 生成器可以接收参数 */</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">idMaker</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">var</span> index = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>] || <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>        <span class="hljs-keyword">yield</span> index++;<br>&#125;<br><br><span class="hljs-keyword">var</span> gen = <span class="hljs-title function_">idMaker</span>(<span class="hljs-number">5</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 5</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 6</span><br><br><span class="hljs-comment">/* yield*示例 */</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">anotherGenerator</span>(<span class="hljs-params">i</span>) &#123;<br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generator</span>(<span class="hljs-params">i</span>)&#123;<br>  <span class="hljs-keyword">yield</span> i;<br>  <span class="hljs-keyword">yield</span>* <span class="hljs-title function_">anotherGenerator</span>(i);<span class="hljs-comment">// 移交执行权</span><br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">10</span>;<br>&#125;<br><br><span class="hljs-keyword">var</span> gen = <span class="hljs-title function_">generator</span>(<span class="hljs-number">10</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 10</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 11</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 12</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 13</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 20</span><br><br><span class="hljs-comment">/* 传递参数 */</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">createIterator</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> first = <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> second = <span class="hljs-keyword">yield</span> first + <span class="hljs-number">2</span>; <span class="hljs-comment">// 4 + 2</span><br>                                  <span class="hljs-comment">// first =4 是 next(4) 将参数赋给上一条的</span><br>    <span class="hljs-keyword">yield</span> second + <span class="hljs-number">3</span>;             <span class="hljs-comment">// 5 + 3</span><br>&#125;<br><br><span class="hljs-keyword">let</span> iterator = <span class="hljs-title function_">createIterator</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>());    <span class="hljs-comment">// &quot;&#123; value: 1, done: false &#125;&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>(<span class="hljs-number">4</span>));   <span class="hljs-comment">// &quot;&#123; value: 6, done: false &#125;&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>(<span class="hljs-number">5</span>));   <span class="hljs-comment">// &quot;&#123; value: 8, done: false &#125;&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iterator.<span class="hljs-title function_">next</span>());    <span class="hljs-comment">// &quot;&#123; value: undefined, done: true &#125;&quot;</span><br><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">yieldAndReturn</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;Y&quot;</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;R&quot;</span>;<span class="hljs-comment">//显式返回处，可以观察到 done 也立即变为了 true</span><br>  <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;unreachable&quot;</span>;<span class="hljs-comment">// 不会被执行了</span><br>&#125;<br><br><span class="hljs-comment">/* 显示返回 */</span><br><span class="hljs-keyword">var</span> gen = <span class="hljs-title function_">yieldAndReturn</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// &#123; value: &quot;Y&quot;, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// &#123; value: &quot;R&quot;, done: true &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// &#123; value: undefined, done: true &#125;</span><br><br><span class="hljs-comment">/* 生成器不能被当构造器具使用 */</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">f</span>(<span class="hljs-params"></span>) &#123;&#125;<br><span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> f; <span class="hljs-comment">// throws &quot;TypeError: f is not a constructor&quot;</span><br><br><span class="hljs-comment">/* 使用迭代器遍历二维数组并转换成一堆数组 */</span><br><br><span class="hljs-comment">// 二维数组：类型 数组名[行号][列号]</span><br><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">iterArr</span>(<span class="hljs-params">arr</span>) &#123;            <span class="hljs-comment">//迭代器返回一个迭代器对象</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr)) &#123;         <span class="hljs-comment">// 内节点</span><br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) &#123;<br>          <span class="hljs-keyword">yield</span>* <span class="hljs-title function_">iterArr</span>(arr[i]);   <span class="hljs-comment">// (*) 递归</span><br>      &#125;<br>  &#125; <span class="hljs-keyword">else</span> &#123;                          <span class="hljs-comment">// 离开</span><br>      <span class="hljs-keyword">yield</span> arr;<br>  &#125;<br>&#125;<br><span class="hljs-comment">// 使用 for-of 遍历：</span><br><span class="hljs-keyword">var</span> arr = [<span class="hljs-string">&#x27;a&#x27;</span>, [<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>], [<span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>]];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> x <span class="hljs-keyword">of</span> <span class="hljs-title function_">iterArr</span>(arr)) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x);               <span class="hljs-comment">// a  b  c  d  e</span><br>&#125;<br><span class="hljs-comment">// 或者直接将迭代器展开：</span><br><span class="hljs-keyword">var</span> arr = [ <span class="hljs-string">&#x27;a&#x27;</span>, [<span class="hljs-string">&#x27;b&#x27;</span>,[ <span class="hljs-string">&#x27;c&#x27;</span>, [<span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>]]]];<br><span class="hljs-keyword">var</span> gen = <span class="hljs-title function_">iterArr</span>(arr);<br>arr = [...gen];                        <span class="hljs-comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span><br><br></code></pre></td></tr></table></figure>

<h3 id="generator函数与构造函数的区别"><a href="#generator函数与构造函数的区别" class="headerlink" title="generator函数与构造函数的区别"></a>generator函数与构造函数的区别</h3><ol>
<li>Generator 函数总是返回一个遍历器，ES6 规定这个遍历器是 Generator 函数的实例，也继承了 Generator 函数的prototype对象上的方法</li>
<li>Generator 函数g返回的遍历器obj，是g的实例，而且继承了g.prototype。但是，如果把g当作普通的构造函数，并不会生效，因为g返回的总是遍历器对象，而不是this对象，所以Generator 函数也不能跟new命令一起用。</li>
</ol>
<h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><p>解决回调地狱，异步编程解决方案<br>promise是一个构造函数，用来封装异步操作并可以获取其成功或失败的结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 读取文件</span><br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br>fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">&#x27;./file/2.txt&#x27;</span>,<span class="hljs-string">&#x27;hello node.js&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">err,data</span>)&#123;<br>  <span class="hljs-keyword">if</span>(err) &#123;<span class="hljs-keyword">throw</span> err&#125;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-title function_">toString</span>())<br>&#125;)<br><br><span class="hljs-comment">// 用promise封装</span><br><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve,reject</span>) &#123;<br>    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&quot;./file/2.txt&#x27;,&#x27;hello node.j&quot;</span>,<span class="hljs-function">(<span class="hljs-params">err,data</span>) =&gt;</span>&#123;<br>        <span class="hljs-comment">// 判断如果失败</span><br>        <span class="hljs-keyword">if</span>(err) <span class="hljs-title function_">reject</span>(err)<br>        <span class="hljs-comment">// 如果成功</span><br>        <span class="hljs-title function_">resolve</span>(data)<br>    &#125;)<br>&#125;)<br>p.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-title function_">toString</span>())<br>&#125;,<span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;读取失败&#x27;</span>)<br>&#125;)<br><br><span class="hljs-comment">// promise封装ajax</span><br><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;https://api.apiopen.top/get&#x27;</span>)<br>    xhr.<span class="hljs-title function_">send</span>()<br>    xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span>(xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) &#123;<br>            <span class="hljs-keyword">if</span>(xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt;<span class="hljs-number">300</span>) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">response</span>)<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(xhr.<span class="hljs-property">status</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;)<br>p.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)<br>&#125;,<span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(reason)<br>&#125;)<br></code></pre></td></tr></table></figure>

<ul>
<li>promise.then()方法返回的结果是promise对象，对象状态由回调函数的执行结果决定</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js">    <span class="hljs-comment">// 创建一个promise对象</span><br>    <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;用户数据&#x27;</span>)<br>        &#125;,<span class="hljs-number">1000</span>)<br>    &#125;)<br><span class="hljs-keyword">const</span> result = p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span>&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)<br>    <span class="hljs-comment">// 1. 非promise类型的属性,</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hahah&#x27;</span>;<br>    <span class="hljs-comment">// 2. promise类型的属性</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>    &#125;)<br>    <span class="hljs-comment">// 3. 抛出错误</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;出错了&#x27;</span>) <span class="hljs-comment">// 返回reject状态</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;出错了&#x27;</span> <span class="hljs-comment">// 这样也是reject状态</span><br>&#125;) reason =&gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(reason)<br>&#125;<br><br><span class="hljs-comment">// 链式调用</span><br>p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br><br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br><br>&#125;)<br><span class="hljs-comment">// 通过链式调用解决回调地狱</span><br></code></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 案例练习</span><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;./resources/1.txt&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">err,data1</span>) =&gt;</span> &#123;<br>    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;./resources/2.txt&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">err,data2</span>) =&gt;</span> &#123;<br>        fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;./resources/3.txt&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">err,data3</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">let</span> result = data1 + <span class="hljs-string">&#x27;\r\n&#x27;</span> + data2 + <span class="hljs-string">&#x27;\r\n&#x27;</span> + data3<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br>        &#125;)<br>    &#125;)<br>&#125;)<br><span class="hljs-comment">// 用promise实现</span><br><span class="hljs-keyword">const</span> p =<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&quot;./resources/1.txt&quot;</span>,<span class="hljs-function">(<span class="hljs-params">err,data</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">resolve</span>(data)<br>    &#125;)<br>&#125;)<br>p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// console.log(value.toString())</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>        fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&quot;./resources/2.txt&quot;</span>,<span class="hljs-function">(<span class="hljs-params">err,data</span>) =&gt;</span> &#123;<br>            <span class="hljs-title function_">resolve</span>([value,data]) <span class="hljs-comment">// value是上面第一个文件中的值，data是第二个，把两个合并再继续向下传递</span><br>        &#125;)<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span>  =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>        fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&quot;./resources/3.txt&quot;</span>,<span class="hljs-function">(<span class="hljs-params">err,data</span>) =&gt;</span> &#123;<br>            <span class="hljs-comment">// 压入</span><br>            value.<span class="hljs-title function_">push</span>(data)<br>            <span class="hljs-title function_">resolve</span>(value)<br>        &#125;)<br>    &#125;)<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\r\n&#x27;</span>))<br>    &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure>

<ul>
<li>catch方法捕捉错误</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;出错了！&#x27;</span>)<br>        &#125;,<span class="hljs-number">1000</span>)<br>    &#125;)<br>    <span class="hljs-comment">// 这是一种知道错误的方式</span><br>p.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)&#123;&#125;,<span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(reason)<br>&#125;)<br><span class="hljs-comment">// 还可以用catch,是一个语法糖</span><br>p.<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(reason)<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>set类似于数组，但成员值都是唯一的，集合实现了iterator接口，所以可以使用[扩展运算符]和[for…of]进行遍历，集合的属性和方法</p>
<ul>
<li>size返回集合的元素的个数</li>
<li>add增加一个新元素，返回当前合集</li>
<li>delete 删除元素，返回boolean值</li>
<li>has 检测集合中是否包含某个元素，返回boolean值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">&#x27;hhh&#x27;</span>,<span class="hljs-string">&#x27;fff&#x27;</span>,<span class="hljs-string">&#x27;sss&#x27;</span>,<span class="hljs-string">&#x27;sss&#x27;</span>]);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-property">size</span>);<span class="hljs-comment">// 4</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;aaa&#x27;</span>)) <span class="hljs-comment">// &#123;&#x27;hhh&#x27;,&#x27;fff&#x27;,&#x27;sss&#x27;,&#x27;sss&#x27;,&#x27;aaa&#x27;&#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;fff&#x27;</span>)) <span class="hljs-comment">// &#123;&#x27;hhh&#x27;,&#x27;sss&#x27;,&#x27;aaa&#x27;&#125;</span><br><span class="hljs-comment">// 检测</span><br>s.<span class="hljs-title function_">has</span>(<span class="hljs-string">&#x27;aaa&#x27;</span>) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>

<h3 id="Set的应用"><a href="#Set的应用" class="headerlink" title="Set的应用"></a>Set的应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 数组去重</span><br><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>]<br><span class="hljs-keyword">let</span> result = [..<span class="hljs-property">new</span> <span class="hljs-title class_">Set</span>(arr)]<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr) <span class="hljs-comment">// 1,2,3,4,5</span><br><br><span class="hljs-comment">// 2. 交集</span><br><span class="hljs-keyword">let</span> arr2 = [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<br><span class="hljs-keyword">let</span> result = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr)].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> s2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr2); <span class="hljs-comment">// 4,5,6</span><br>    <span class="hljs-keyword">if</span>(s2.<span class="hljs-title function_">has</span>(item)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>&#125;)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// 4</span><br><span class="hljs-comment">// 简化上述代码</span><br><span class="hljs-keyword">let</span> result = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr2).<span class="hljs-title function_">has</span>(item))]<br><br><span class="hljs-comment">// 3. 并集</span><br><span class="hljs-keyword">let</span> union = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...arr,...arr2]) <span class="hljs-comment">// 先去重</span><br>    <span class="hljs-comment">// 再转换成数组</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(union)<span class="hljs-comment">// 1,2,3,4,5,6</span><br><br><span class="hljs-comment">// 4. 差集</span><br><span class="hljs-keyword">let</span> diff = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> !<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr2).<span class="hljs-title function_">has</span>(item))];<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(diff) <span class="hljs-comment">// 1,2,3</span><br></code></pre></td></tr></table></figure>

<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>类似于对象，也是键值对的集合，键的范围不限于字符串，各种类型的值包括对象，都可以当作键。Map也实现iterator接口，所以可以使用[扩展运算符]和[for…of]进行遍历。Map的属性和方法<br>size 返回map的元素个数<br>set  增加一个新元素，返回当前map<br>get  返回键名对象的键值<br>has  检测Map中是否包含某个元素，返回boolean值<br>clear 清空集合，返回undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 声明map</span><br><span class="hljs-keyword">let</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()<br><span class="hljs-comment">// 添加元素</span><br>m.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;hahaha&#x27;</span>) <span class="hljs-comment">// key:name value:hahaha</span><br>m.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;change&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// &#123;&quot;name&quot; =&gt; &quot;hahaha&quot;,&quot;change&quot; =&gt; f&#125;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;666&#x27;</span>)<br>&#125;)<br><br><span class="hljs-keyword">let</span> key = &#123;<br>    <span class="hljs-attr">music</span>:<span class="hljs-string">&#x27;just like fire&#x27;</span><br>&#125;<br>m.<span class="hljs-title function_">set</span>(key,[<span class="hljs-string">&#x27;周深&#x27;</span>,<span class="hljs-string">&#x27;哔哩哔哩&#x27;</span>,<span class="hljs-string">&#x27;2022&#x27;</span>])<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m) <span class="hljs-comment">// // &#123;&quot;name&quot; =&gt; &quot;hahaha&quot;,&quot;change&quot; =&gt; f,&#123;...&#125; =&gt; Array(3)&#125;</span><br><span class="hljs-comment">// 展开后</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 0:&#123;&quot;name&quot; =&gt; &quot;hahaha&quot;&#125;</span><br><span class="hljs-comment"> * 1:&#123;&quot;change&quot; =&gt; function() &#123;console.log(&#x27;666&#x27;)&#125;&#125;</span><br><span class="hljs-comment"> * 2:&#123;Object =&gt; Array(3)&#125; </span><br><span class="hljs-comment"> *  key:&#123;music:&#x27;just like fire&#x27;&#125;</span><br><span class="hljs-comment"> *  value:(3) [&#x27;周深&#x27;,&#x27;哔哩哔哩&#x27;,&#x27;2022&#x27;]</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">// size</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-property">size</span>) <span class="hljs-comment">// 3</span><br><span class="hljs-comment">// 删除</span><br>m.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;name&#x27;</span>) <br><span class="hljs-comment">// 获取</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;change&#x27;</span>)) <span class="hljs-comment">//function() &#123;console.log(&#x27;666&#x27;)&#125;</span><br><span class="hljs-comment">// 清空</span><br>m.<span class="hljs-title function_">clear</span>()<br><span class="hljs-comment">// 遍历</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> m) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v)<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * [&quot;name&quot;,&quot;hahaha&quot;]</span><br><span class="hljs-comment">     * [&quot;change&quot;,f]</span><br><span class="hljs-comment">     * [&#123;...&#125;,Array(3)]</span><br><span class="hljs-comment">     */</span> <br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="class类"><a href="#class类" class="headerlink" title="class类"></a>class类</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 手机</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Phone</span>(<span class="hljs-params">brand,price</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = price<br>&#125;<br><span class="hljs-comment">// 添加方法</span><br><span class="hljs-title class_">Phone</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">call</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;喂喂喂&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 实例化对象</span><br><span class="hljs-keyword">let</span> iPhone = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>(<span class="hljs-string">&#x27;XS&#x27;</span>,<span class="hljs-number">7999</span>);<br>iPhone.<span class="hljs-title function_">call</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(iPhone)<br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// class方法</span><br><span class="hljs-comment">// 与上述一样</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>     <span class="hljs-title function_">constructor</span>(<span class="hljs-params">brand,price</span>) [<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = price<br>     ]<br>     <span class="hljs-comment">// 方法必须使用该语法，不能使用ES5的对象完整形式call:function()&#123;&#125;</span><br>     <span class="hljs-title function_">call</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;喂喂喂&#x27;</span>)<br>     &#125;<br>&#125;<br><span class="hljs-keyword">let</span> onePlus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>(<span class="hljs-string">&quot;1+&quot;</span>,<span class="hljs-number">1999</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(onePlus)<br></code></pre></td></tr></table></figure>

<h3 id="static"><a href="#static" class="headerlink" title="static"></a>static</h3><p>static标注的属性和方法属于类，不属于实例对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>     <span class="hljs-keyword">static</span> name = <span class="hljs-string">&#x27;手机&#x27;</span><br>     <span class="hljs-keyword">static</span> <span class="hljs-title function_">change</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;喂喂喂是110吗？&#x27;</span>)<br>     &#125;<br>&#125;<br><span class="hljs-keyword">let</span> phone = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(phone.<span class="hljs-property">name</span>) <span class="hljs-comment">// undefined</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Phone</span>.<span class="hljs-property">name</span>) <span class="hljs-comment">// 手机</span><br></code></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul>
<li>ES5</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Phone</span>(<span class="hljs-params">brand,price</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = price<br>&#125;<br><span class="hljs-title class_">Phone</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">call</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;喂喂喂&#x27;</span>)<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">smartPhone</span>(<span class="hljs-params">brand,price,size,color</span>) &#123;<br>    <span class="hljs-title class_">Phone</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,brand,price);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = size<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color<br>&#125;<br><span class="hljs-comment">// 设置子级构造函数的原理</span><br>smartPhone.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>;<br>smartPhone.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = smartPhone<br><br><span class="hljs-comment">// 声明子类的方法</span><br>smartPhone.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">photo</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我可以拍照&#x27;</span>)<br>&#125;<br>smartPhone.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">playgame</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我可以玩游戏&#x27;</span>)<br>&#125;<br><span class="hljs-keyword">const</span> ip = <span class="hljs-keyword">new</span> <span class="hljs-title function_">smartPhone</span>(<span class="hljs-string">&#x27;1+&#x27;</span>,<span class="hljs-number">2499</span>,<span class="hljs-string">&#x27;5.5inch&#x27;</span>,<span class="hljs-string">&#x27;黑色&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ip)<br></code></pre></td></tr></table></figure>

<ul>
<li>ES6继承</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span>&#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">brand,price</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = price<br>    &#125;<br>    <span class="hljs-comment">// 父类成员属性</span><br>    <span class="hljs-title function_">call</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;喂喂喂&#x27;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">smartPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Phone</span> &#123;<br>    <span class="hljs-comment">// 构造方法</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">brand,price,size,color</span>) &#123;<br>        <span class="hljs-variable language_">super</span>(brand,price)<br>    &#125;<br>    <span class="hljs-title function_">photo</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我可以拍照&#x27;</span>)<br>    &#125;<br>    <span class="hljs-title function_">playgame</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;我可以玩游戏&#x27;</span>)<br>    &#125;   <br>&#125;<br><span class="hljs-keyword">const</span> ip = <span class="hljs-keyword">new</span> <span class="hljs-title function_">smartPhone</span>(<span class="hljs-string">&#x27;1+&#x27;</span>,<span class="hljs-number">2499</span>,<span class="hljs-string">&#x27;5.5inch&#x27;</span>,<span class="hljs-string">&#x27;黑色&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ip)<br>ip.<span class="hljs-title function_">call</span>() <span class="hljs-comment">// 我可以打电话</span><br>ip.<span class="hljs-title function_">photo</span>() <span class="hljs-comment">// 我可以拍照</span><br>ip.<span class="hljs-title function_">playgame</span>() <span class="hljs-comment">// 我可以玩游戏</span><br></code></pre></td></tr></table></figure>

<h3 id="get与set方法"><a href="#get与set方法" class="headerlink" title="get与set方法"></a>get与set方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// get和set方法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span>&#123;<br>    <span class="hljs-keyword">get</span> <span class="hljs-title function_">price</span>() &#123;<br>        <span class="hljs-comment">// console.log(&#x27;价格属性被读取了&#x27;) </span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hahaha&#x27;</span><br>    &#125;<br>    <span class="hljs-keyword">set</span> <span class="hljs-title function_">price</span>(<span class="hljs-params">newVal</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;价格属性被修改了&#x27;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-property">price</span>) <span class="hljs-comment">// hahaha</span><br>s.<span class="hljs-property">price</span> = <span class="hljs-string">&#x27;free&#x27;</span><br></code></pre></td></tr></table></figure>

<h2 id="数值扩展"><a href="#数值扩展" class="headerlink" title="数值扩展"></a>数值扩展</h2><ol>
<li>Number.EPSILON 是 JavaScript表示最小精度<br>EPSILON 属性值接近于2.2204460492503130808472633361816E-16</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> === <span class="hljs-number">0.3</span>) <span class="hljs-comment">// false 是0.30000000004</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">equal</span>(<span class="hljs-params">a,b</span>) &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(a-b) &lt; <span class="hljs-title class_">Number</span>.<span class="hljs-property">EPSILON</span>) &#123; <span class="hljs-comment">// 如果绝对值小于误差那就认为是相等的</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>,<span class="hljs-number">0.3</span>)<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>表达方式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 二进制</span><br><span class="hljs-keyword">let</span> b = <span class="hljs-number">0b1010</span>; <span class="hljs-comment">//0b开头</span><br><span class="hljs-comment">// 八进制</span><br><span class="hljs-keyword">let</span> o = <span class="hljs-number">0o777</span>; <span class="hljs-comment">// 0o开头</span><br><span class="hljs-comment">// 十进制</span><br><span class="hljs-keyword">let</span> d = <span class="hljs-number">100</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>Number.isFinite 检测一个数值是否为有限数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isFinite</span>(<span class="hljs-number">100</span>)); <span class="hljs-comment">// true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isFinite</span>(<span class="hljs-number">100</span>/<span class="hljs-number">0</span>)); <span class="hljs-comment">// false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isFinite</span>(<span class="hljs-title class_">Infinity</span>)); <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>Number.isNaN 检测一个数值是否为NaN</li>
<li>Number.isInteger 判断一个数是否为整数</li>
<li>Number.parseInt(),parseFloat 字符串转整数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&#x27;3.53245中文&#x27;</span>)) <span class="hljs-comment">// 3.53245</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&#x27;53245aha&#x27;</span>)) <span class="hljs-comment">// 53235</span><br></code></pre></td></tr></table></figure>

<ol start="7">
<li>Math.trunc() 将数字的小数部分抹掉<br>console.log(Math.trunc(3.5)) // 3</li>
<li>Math.sign 判断一个数为正数  负数 零</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sign</span>(<span class="hljs-number">100</span>)) <span class="hljs-comment">// 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sign</span>(<span class="hljs-number">0</span>)) <span class="hljs-comment">// 0</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sign</span>(-<span class="hljs-number">100</span>)) <span class="hljs-comment">// -1</span><br></code></pre></td></tr></table></figure>

<h2 id="对象方法扩展"><a href="#对象方法扩展" class="headerlink" title="对象方法扩展"></a>对象方法扩展</h2><ol>
<li>Object.is 判断两个值是否完全相等</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(<span class="hljs-number">120</span>,<span class="hljs-number">120</span>)) <span class="hljs-comment">// === true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(<span class="hljs-title class_">NaN</span>,<span class="hljs-title class_">NaN</span>)) <span class="hljs-comment">// === true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">NaN</span> === <span class="hljs-title class_">NaN</span>) <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Object.assign 对象的合并</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> config1 = &#123;<br>    <span class="hljs-attr">host</span>:<span class="hljs-string">&#x27;localhost&#x27;</span>,<br>    <span class="hljs-attr">port</span>:<span class="hljs-number">3306</span>,<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;root&#x27;</span>,<br>    <span class="hljs-attr">pass</span>:<span class="hljs-string">&#x27;root&#x27;</span><br>&#125;<br><span class="hljs-keyword">const</span> config2 = &#123;<br>    <span class="hljs-attr">host</span>:<span class="hljs-string">&#x27;http://www.baidu.com&#x27;</span>,<br>    <span class="hljs-attr">port</span>:<span class="hljs-number">3301</span>,<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;baidu&#x27;</span>,<br>    <span class="hljs-attr">pass</span>:<span class="hljs-string">&#x27;baidu&#x27;</span><br>&#125;<br> <span class="hljs-keyword">let</span> result = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config1,config2) <span class="hljs-comment">// 当对象中只有一级属性，没有二级属性的时候这个方法为深拷贝</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// 后面会覆盖前面的，重名后面覆盖前面，不重名正常加载</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>Object.setPrototypeOf 设置原型对象 Object.getPrototypeOf</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> author = &#123;<br>    name :<span class="hljs-string">&#x27;东野圭吾&#x27;</span><br>&#125;<br><span class="hljs-keyword">const</span> books = &#123;<br>    <span class="hljs-attr">book</span>:[<span class="hljs-string">&#x27;放学后&#x27;</span>,<span class="hljs-string">&#x27;白夜行&#x27;</span>,<span class="hljs-string">&#x27;恶意&#x27;</span>]<br>&#125;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(author,books)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(author) <br><span class="hljs-comment">// &#123;name:&quot;东野圭吾&quot;&#125; 展开__proto__ 里面有book:[&#x27;放学后&#x27;,&#x27;白夜行&#x27;,&#x27;恶意&#x27;]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(author)) <span class="hljs-comment">// book:[&#x27;放学后&#x27;,&#x27;白夜行&#x27;,&#x27;恶意&#x27;]</span><br></code></pre></td></tr></table></figure>

<h2 id="es6模块化"><a href="#es6模块化" class="headerlink" title="es6模块化"></a>es6模块化</h2><p>模块化是指将一个大的程序文件，拆分成许多小的文件，然后将小文件组合起来</p>
<ul>
<li>模块化好处</li>
</ul>
<ol>
<li>防止命名冲突</li>
<li>代码复用</li>
<li>高维护性</li>
</ol>
<ul>
<li>模块化规范产品，es6之前有</li>
</ul>
<ol>
<li>commonjs =&gt; nodejs browserify</li>
<li>AMD =&gt; requireJS</li>
<li>CMD =&gt; seaJS</li>
</ol>
<h2 id="ES7新特性"><a href="#ES7新特性" class="headerlink" title="ES7新特性"></a>ES7新特性</h2><ul>
<li>includes</li>
<li>** = Math.pow(a,b) a的b次方</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span> ** <span class="hljs-number">10</span>) <span class="hljs-comment">// 1024</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>,<span class="hljs-number">10</span>)) <span class="hljs-comment">// 1024</span><br></code></pre></td></tr></table></figure>

<h2 id="ES8新特性"><a href="#ES8新特性" class="headerlink" title="ES8新特性"></a>ES8新特性</h2><ul>
<li>async<br>两种语法结合让异步代码像同步一样</li>
</ul>
<ol>
<li>async函数返回值为promise对象</li>
<li>promise对象的结果由async函数执行的返回值决定</li>
</ol>
<ul>
<li>await</li>
</ul>
<ol>
<li>必须写在async函数中</li>
<li>await右侧表达式一般为promise对象</li>
<li>await返回的是promise成功的值</li>
<li>await的promise失败了，就会抛出异常，需要通过try..catch捕获处理</li>
</ol>
<ul>
<li><p>Object.values() 返回一个给定对象的所有可枚举属性值的数组</p>
</li>
<li><p>Object.entries() 返回一个给定对象自身可遍历的属性[key,value]的数组</p>
</li>
<li><p>Object.getOwnPropertyDescriptors 返回指定对象所有自身属性的描述对象<br>configurable,writable,enumerable</p>
</li>
</ul>
<h2 id="es9-rest参数"><a href="#es9-rest参数" class="headerlink" title="es9 rest参数"></a>es9 rest参数</h2><h2 id="正则扩展"><a href="#正则扩展" class="headerlink" title="正则扩展"></a>正则扩展</h2><ul>
<li>命名捕获分组</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">&#x27;&lt;a href=&quot;http://www.haaha.com&quot;&gt;hahaha&lt;/a&gt;&#x27;</span><br><span class="hljs-comment">// 提取url与标签文本</span><br><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/&lt;a href=&quot;(.*)&quot;&gt;(.*)&lt;\/a&gt;/</span>; <span class="hljs-comment">// 第一个.*是 http://www.haaha.com  第二个是 hahaha</span><br><span class="hljs-comment">// 执行</span><br><span class="hljs-keyword">const</span> result = reg.<span class="hljs-title function_">exec</span>(str)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br></code></pre></td></tr></table></figure>

<ul>
<li>正向断言、反向断言</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">&#x27;hfkasjhllfk748we5790啦啦啦&#x27;</span><br><span class="hljs-comment">// 正向断言</span><br><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\d+(?=啦)/</span><br><span class="hljs-comment">// ？=表示判断</span><br><span class="hljs-keyword">const</span> result = reg.<span class="hljs-title function_">exec</span>(str)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">//5790</span><br><br><span class="hljs-comment">// 反向断言，根据前面内容做判断</span><br><span class="hljs-comment">// const reg = /(?&lt;=e)\d+/</span><br><span class="hljs-keyword">const</span> result = reg.<span class="hljs-title function_">exec</span>(str)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">//5790</span><br></code></pre></td></tr></table></figure>

<ul>
<li>dotAll<br>dot 正则中元字符，有.的意思，表示除换行符以外的任意单个字符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;ul&gt;</span><br><span class="hljs-string">        &lt;li&gt;</span><br><span class="hljs-string">            &lt;a&gt;死亡诗社&lt;/a&gt;</span><br><span class="hljs-string">            &lt;p&gt;时间&lt;/p&gt;</span><br><span class="hljs-string">        &lt;/li&gt;</span><br><span class="hljs-string">        &lt;li&gt;</span><br><span class="hljs-string">            &lt;a&gt;猫的报恩&lt;/a&gt;</span><br><span class="hljs-string">            &lt;p&gt;时间&lt;/p&gt;</span><br><span class="hljs-string">        &lt;/li&gt;</span><br><span class="hljs-string">    &lt;/ul&gt;</span><br><span class="hljs-string">`</span><br><br><span class="hljs-comment">// 获取li中的电影名与时间</span><br><span class="hljs-comment">// 声明正则</span><br><span class="hljs-comment">// const reg = /&lt;li&gt;\s+&lt;a&gt;(.*?)&lt;\/a&gt;\s+&lt;p&gt;(.*?)&lt;\/p&gt;/ </span><br><span class="hljs-keyword">const</span> result = reg.<span class="hljs-title function_">exec</span>(str)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <br><span class="hljs-comment">// 如果标签非常多要疯狂➕\s换行符，现在可以用dot</span><br><span class="hljs-comment">// 单个匹配</span><br><span class="hljs-comment">// const reg = /&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;/s; </span><br><span class="hljs-comment">// 全部匹配</span><br><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;/g</span>s; <br><span class="hljs-keyword">const</span> result = reg.<span class="hljs-title function_">exec</span>(str)<br><span class="hljs-keyword">let</span> data = []<br><span class="hljs-keyword">while</span>(result =reg.<span class="hljs-title function_">exec</span>(str)) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br>    data.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">title</span>:result[<span class="hljs-number">1</span>],<span class="hljs-attr">time</span>:result[<span class="hljs-number">2</span>]&#125;)<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br></code></pre></td></tr></table></figure>

<h2 id="ES10对象扩展方法"><a href="#ES10对象扩展方法" class="headerlink" title="ES10对象扩展方法"></a>ES10对象扩展方法</h2><p>Object.fromEntries</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 二维数组</span><br><span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>([<br>    [<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;蔡依林&#x27;</span>],<br>    [<span class="hljs-string">&#x27;music&#x27;</span>,<span class="hljs-string">&#x27;大艺术家,爱情三十六计,怪美的,特务J,Play,我呸&#x27;</span>]<br>])<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br><br><span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()<br>m.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;蔡依林&#x27;</span>)<br><span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(m)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br></code></pre></td></tr></table></figure>

<ul>
<li>entries将字符串转为二维数组</li>
<li>fromEntries 将二维数组转换为对象</li>
</ul>
<h2 id="ES10字符串扩展方法"><a href="#ES10字符串扩展方法" class="headerlink" title="ES10字符串扩展方法"></a>ES10字符串扩展方法</h2><ul>
<li>es5trim 用来清除字符串两侧空白字符</li>
<li>trimStart  清除字符串左侧空白</li>
<li>trimEnd  清除字符串右侧空白</li>
</ul>
<h2 id="ES10数组方法扩展"><a href="#ES10数组方法扩展" class="headerlink" title="ES10数组方法扩展"></a>ES10数组方法扩展</h2><ul>
<li>flat</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// flat将多维数组转换为低维数组</span><br><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]];<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">flat</span>()) <span class="hljs-comment">// [1,2,3,4,5,6]</span><br><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,[<span class="hljs-number">7</span>,<span class="hljs-number">8</span>]]]<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">flat</span>(<span class="hljs-number">2</span>)) <span class="hljs-comment">// [1,2,3,4,5,6,7,8] 这里面参数2是深度，为一个数字</span><br></code></pre></td></tr></table></figure>

<ul>
<li>flatMap 与map很像就是把map的结果做一个降维</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br><span class="hljs-keyword">const</span> result = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item * <span class="hljs-number">10</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// [10,20,30,40]</span><br><span class="hljs-comment">// 如果是</span><br><span class="hljs-keyword">const</span> result = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> [item * <span class="hljs-number">10</span>])<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) [<span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>),<span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>),<span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>),<span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>)]<br><span class="hljs-comment">// 所以可以</span><br><span class="hljs-keyword">const</span> result = arr.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> [item * <span class="hljs-number">10</span>])<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// [10,20,30,40]</span><br></code></pre></td></tr></table></figure>

<h2 id="ES10-Symbol-prototype-description"><a href="#ES10-Symbol-prototype-description" class="headerlink" title="ES10 Symbol.prototype.description"></a>ES10 Symbol.prototype.description</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> s = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;music&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-property">description</span>) <span class="hljs-comment">// music</span><br></code></pre></td></tr></table></figure>

<h2 id="ES11-私有属性"><a href="#ES11-私有属性" class="headerlink" title="ES11 私有属性"></a>ES11 私有属性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-comment">// 公有属性</span><br>    name;<br>    <span class="hljs-comment">// 私有属性</span><br>    #age;<br>    #weight;<br>    <span class="hljs-comment">// 构造方法</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age,weight</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.#age = age;<br>        <span class="hljs-variable language_">this</span>.#weight = weight<br>    &#125;<br>    <span class="hljs-comment">// 但如果在内部就可以</span><br>    <span class="hljs-title function_">intro</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl.<span class="hljs-property">name</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl.#age) <br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl.#weight)<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 实例化</span><br><span class="hljs-keyword">const</span> girl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;小红&#x27;</span>，<span class="hljs-number">18</span>，<span class="hljs-string">&#x27;45kg&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl) <span class="hljs-comment">// &#123;name:&#x27;小红&#x27;，age:18，weight:&#x27;45kg&#x27;&#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl.<span class="hljs-property">name</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(girl.#age) <span class="hljs-comment">// Private field &#x27;#age&#x27; must be declared in a enclosing class</span><br>girl.<span class="hljs-title function_">intro</span>() <span class="hljs-comment">// 小红 18 45kg</span><br></code></pre></td></tr></table></figure>

<h2 id="ES11-Promise-allSettled"><a href="#ES11-Promise-allSettled" class="headerlink" title="ES11 Promise.allSettled"></a>ES11 Promise.allSettled</h2><ul>
<li>接收一个promise的数组，返回结果是一个promise对象，不过返回结果永远成功状态，返回的值是每一个promise全部状态和结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 声明两个promise对象</span><br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;商品数据 - 1&#x27;</span>)<br>    &#125;,<span class="hljs-number">1000</span>)<br>&#125;)<br><span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;出错了&#x27;</span>)<br>    &#125;,<span class="hljs-number">1000</span>)<br>&#125;)<br><span class="hljs-comment">// 调用allSettled方法</span><br><span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([p1,p2])<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// [[PromiseStatus]]:resolved [[PromiseValue]]:Array(2)  //状态永远成功，但里面值一个成功一个失败</span><br></code></pre></td></tr></table></figure>
<h2 id="ES11-String-prototype-matchAll-得到正则批量匹配的结果"><a href="#ES11-String-prototype-matchAll-得到正则批量匹配的结果" class="headerlink" title="ES11 String.prototype.matchAll 得到正则批量匹配的结果"></a>ES11 String.prototype.matchAll 得到正则批量匹配的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;ul&gt;</span><br><span class="hljs-string">        &lt;li&gt;</span><br><span class="hljs-string">            &lt;a&gt;死亡诗社&lt;/a&gt;</span><br><span class="hljs-string">            &lt;p&gt;时间&lt;/p&gt;</span><br><span class="hljs-string">        &lt;/li&gt;</span><br><span class="hljs-string">        &lt;li&gt;</span><br><span class="hljs-string">            &lt;a&gt;猫的报恩&lt;/a&gt;</span><br><span class="hljs-string">            &lt;p&gt;时间&lt;/p&gt;</span><br><span class="hljs-string">        &lt;/li&gt;</span><br><span class="hljs-string">    &lt;/ul&gt;</span><br><span class="hljs-string">`</span><br><br><span class="hljs-comment">// 获取li中的电影名与时间</span><br><span class="hljs-comment">// 声明正则</span><br><span class="hljs-comment">// 批量匹配</span><br><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;/g</span>s; <br><span class="hljs-comment">// 调用方法</span><br><span class="hljs-keyword">const</span> result = str.<span class="hljs-title function_">matchAll</span>(reg)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result) <span class="hljs-comment">// 是一个可迭代对象，所以可以使用for...of遍历</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> result) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v) <span class="hljs-comment">// 读到li中的结果</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([...result]) <span class="hljs-comment">// [Array(3),Array(3)] </span><br></code></pre></td></tr></table></figure>

<h2 id="ES11-可选链操作符"><a href="#ES11-可选链操作符" class="headerlink" title="ES11 可选链操作符"></a>ES11 可选链操作符</h2><ul>
<li>符号:?. 应对对象类型参数层级比较深的时候使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 获取数据库连接的属性</span><br>        <span class="hljs-comment">// 原来操作</span><br>        <span class="hljs-keyword">const</span> dbHost = config &amp;&amp; config.<span class="hljs-property">db</span> &amp;&amp; config.<span class="hljs-property">db</span>.<span class="hljs-property">host</span>;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dbHost) <span class="hljs-comment">// 3000</span><br>        <span class="hljs-comment">// 现在</span><br>        <span class="hljs-keyword">const</span> dbHost = config?.<span class="hljs-property">db</span>?.<span class="hljs-property">host</span>;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dbHost) <span class="hljs-comment">// 3000</span><br>&#125;<br><span class="hljs-title function_">main</span>(&#123;<br>    <span class="hljs-attr">db</span>:&#123;<br>        <span class="hljs-attr">host</span>:localhost,<br>        <span class="hljs-attr">username</span>:<span class="hljs-string">&#x27;root&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">cache</span>:&#123;<br>        <span class="hljs-attr">host</span>:<span class="hljs-number">3000</span>,<br>        <span class="hljs-attr">username</span>:<span class="hljs-string">&#x27;root1&#x27;</span><br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="ES11-动态import"><a href="#ES11-动态import" class="headerlink" title="ES11 动态import"></a>ES11 动态import</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btn&#x27;</span>)<br>btn.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">import</span> (<span class="hljs-string">&#x27;./hello.js&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">module</span>.<span class="hljs-title function_">hello</span>()<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="ES11-BigInt"><a href="#ES11-BigInt" class="headerlink" title="ES11 BigInt"></a>ES11 BigInt</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 大整形</span><br><span class="hljs-keyword">let</span> n = <span class="hljs-number">521n</span> <span class="hljs-comment">// n表示大整形</span><br><br><span class="hljs-comment">// 函数</span><br><span class="hljs-keyword">let</span> n = <span class="hljs-number">123</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">BigInt</span>(n)) <span class="hljs-comment">// 123n</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">BigInt</span>(<span class="hljs-number">1.2</span>))<span class="hljs-comment">// 不能使用小数</span><br><br><span class="hljs-comment">// 大数值的运算</span><br><span class="hljs-keyword">let</span> max = <span class="hljs-title class_">Number</span>.<span class="hljs-property">MAX_SAFE_INTEGER</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">BigInt</span>(max) + <span class="hljs-title class_">BigInt</span>(<span class="hljs-number">1</span>)) <span class="hljs-comment">// 不可以直接加</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">BigInt</span>(max) + <span class="hljs-number">1</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">BigInt</span>(max) + <span class="hljs-number">2</span>) <span class="hljs-comment">// 加到2就会发现不能继续➕了</span><br></code></pre></td></tr></table></figure>

<h2 id="ES11-绝对全局对象globalThis"><a href="#ES11-绝对全局对象globalThis" class="headerlink" title="ES11 绝对全局对象globalThis"></a>ES11 绝对全局对象globalThis</h2><p>console.log(globalThis) // window</p>
<div id="paginator"></div></div><div id="post-footer"></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧</a><a id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">John Doe</a></h1><div id="description"><p>支持大家讨论交流</p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ES"><span class="toc-number">1.</span> <span class="toc-text">ES</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">为什么要学习新特性？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es6%E2%80%94%E2%80%94let%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E5%8D%B3%E7%89%B9%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">es6——let变量声明即特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8Fconst"><span class="toc-number">4.</span> <span class="toc-text">常量const</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-number">5.</span> <span class="toc-text">解构赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">数组的解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%A7%A3%E6%9E%84"><span class="toc-number">5.2.</span> <span class="toc-text">对象的解构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es6%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">6.</span> <span class="toc-text">es6模板字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%AE%80%E5%8C%96%E5%86%99%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">对象的简化写法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E7%89%B9%E6%80%A7"><span class="toc-number">8.</span> <span class="toc-text">箭头函数声明特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">8.1.</span> <span class="toc-text">应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es6%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">9.</span> <span class="toc-text">es6函数参数默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rest%E5%8F%82%E6%95%B0"><span class="toc-number">10.</span> <span class="toc-text">rest参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">11.</span> <span class="toc-text">扩展运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8"><span class="toc-number">11.1.</span> <span class="toc-text">应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Symbol"><span class="toc-number">12.</span> <span class="toc-text">Symbol</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#symbol%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">12.1.</span> <span class="toc-text">symbol的应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#symbol%E7%9A%84%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.2.</span> <span class="toc-text">symbol的内置对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8iterator"><span class="toc-number">13.</span> <span class="toc-text">迭代器iterator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%87%BD%E6%95%B0"><span class="toc-number">14.</span> <span class="toc-text">生成器函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#generator%E5%87%BD%E6%95%B0%E4%B8%8E%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">14.1.</span> <span class="toc-text">generator函数与构造函数的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#promise"><span class="toc-number">15.</span> <span class="toc-text">promise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set"><span class="toc-number">16.</span> <span class="toc-text">Set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Set%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">16.1.</span> <span class="toc-text">Set的应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map"><span class="toc-number">17.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class%E7%B1%BB"><span class="toc-number">18.</span> <span class="toc-text">class类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#static"><span class="toc-number">18.1.</span> <span class="toc-text">static</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">18.2.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get%E4%B8%8Eset%E6%96%B9%E6%B3%95"><span class="toc-number">18.3.</span> <span class="toc-text">get与set方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E6%89%A9%E5%B1%95"><span class="toc-number">19.</span> <span class="toc-text">数值扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E6%89%A9%E5%B1%95"><span class="toc-number">20.</span> <span class="toc-text">对象方法扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es6%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">21.</span> <span class="toc-text">es6模块化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES7%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">22.</span> <span class="toc-text">ES7新特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES8%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">23.</span> <span class="toc-text">ES8新特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es9-rest%E5%8F%82%E6%95%B0"><span class="toc-number">24.</span> <span class="toc-text">es9 rest参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E6%89%A9%E5%B1%95"><span class="toc-number">25.</span> <span class="toc-text">正则扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10%E5%AF%B9%E8%B1%A1%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">26.</span> <span class="toc-text">ES10对象扩展方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">27.</span> <span class="toc-text">ES10字符串扩展方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E6%89%A9%E5%B1%95"><span class="toc-number">28.</span> <span class="toc-text">ES10数组方法扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10-Symbol-prototype-description"><span class="toc-number">29.</span> <span class="toc-text">ES10 Symbol.prototype.description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7"><span class="toc-number">30.</span> <span class="toc-text">ES11 私有属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-Promise-allSettled"><span class="toc-number">31.</span> <span class="toc-text">ES11 Promise.allSettled</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-String-prototype-matchAll-%E5%BE%97%E5%88%B0%E6%AD%A3%E5%88%99%E6%89%B9%E9%87%8F%E5%8C%B9%E9%85%8D%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="toc-number">32.</span> <span class="toc-text">ES11 String.prototype.matchAll 得到正则批量匹配的结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-%E5%8F%AF%E9%80%89%E9%93%BE%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">33.</span> <span class="toc-text">ES11 可选链操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-%E5%8A%A8%E6%80%81import"><span class="toc-number">34.</span> <span class="toc-text">ES11 动态import</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-BigInt"><span class="toc-number">35.</span> <span class="toc-text">ES11 BigInt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-%E7%BB%9D%E5%AF%B9%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1globalThis"><span class="toc-number">36.</span> <span class="toc-text">ES11 绝对全局对象globalThis</span></a></li></ol></div><section id="total"><a id="total-archives" href="/archives"><span class="total-title">文章 总数:</span><span class="total-number">5</span></a><div id="total-tags"><span class="total-title">标签:</span><span class="total-number">1</span></div><div id="total-categories"><span class="total-title">分类:</span><span class="total-number">5</span></div></section></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>